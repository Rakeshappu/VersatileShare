"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/auth/signup";
exports.ids = ["pages/api/auth/signup"];
exports.modules = {

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("bcryptjs");

/***/ }),

/***/ "cors":
/*!***********************!*\
  !*** external "cors" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("cors");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "nodemailer":
/*!*****************************!*\
  !*** external "nodemailer" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("nodemailer");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fsignup&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cauth%5Csignup.ts&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fsignup&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cauth%5Csignup.ts&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_auth_signup_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\auth\\signup.ts */ \"(api)/./src/pages/api/auth/signup.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_auth_signup_ts__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_auth_signup_ts__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/auth/signup\",\n        pathname: \"/api/auth/signup\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _src_pages_api_auth_signup_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmF1dGglMkZzaWdudXAmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZzcmMlNUNwYWdlcyU1Q2FwaSU1Q2F1dGglNUNzaWdudXAudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ0U7QUFDMUQ7QUFDK0Q7QUFDL0Q7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDBEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQywwREFBUTtBQUNwQztBQUNPLHdCQUF3Qix5R0FBbUI7QUFDbEQ7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3NyY1xcXFxwYWdlc1xcXFxhcGlcXFxcYXV0aFxcXFxzaWdudXAudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2F1dGgvc2lnbnVwXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXV0aC9zaWdudXBcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fsignup&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cauth%5Csignup.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/lib/auth/jwt.ts":
/*!*****************************!*\
  !*** ./src/lib/auth/jwt.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateOTP: () => (/* binding */ generateOTP),\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   generateVerificationToken: () => (/* binding */ generateVerificationToken),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n\nconst JWT_SECRET = process.env.JWT_SECRET || 'default_secret';\nfunction generateToken(userId) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign({\n        userId\n    }, JWT_SECRET, {\n        expiresIn: '7d'\n    });\n}\nfunction verifyToken(token) {\n    try {\n        return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, JWT_SECRET);\n    } catch (error) {\n        throw new Error('Invalid token');\n    }\n}\nfunction generateVerificationToken() {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign({}, JWT_SECRET, {\n        expiresIn: '1h'\n    });\n}\nfunction generateOTP() {\n    return Math.floor(100000 + Math.random() * 900000).toString();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2F1dGgvand0LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUErQjtBQUUvQixNQUFNQyxhQUFhQyxRQUFRQyxHQUFHLENBQUNGLFVBQVUsSUFBSTtBQUV0QyxTQUFTRyxjQUFjQyxNQUFjO0lBQzFDLE9BQU9MLHdEQUFRLENBQUM7UUFBRUs7SUFBTyxHQUFHSixZQUFZO1FBQUVNLFdBQVc7SUFBSztBQUM1RDtBQUVPLFNBQVNDLFlBQVlDLEtBQWE7SUFDdkMsSUFBSTtRQUNGLE9BQU9ULDBEQUFVLENBQUNTLE9BQU9SO0lBQzNCLEVBQUUsT0FBT1UsT0FBTztRQUNkLE1BQU0sSUFBSUMsTUFBTTtJQUNsQjtBQUNGO0FBRU8sU0FBU0M7SUFDZCxPQUFPYix3REFBUSxDQUFDLENBQUMsR0FBR0MsWUFBWTtRQUFFTSxXQUFXO0lBQUs7QUFDcEQ7QUFDTyxTQUFTTztJQUNkLE9BQU9DLEtBQUtDLEtBQUssQ0FBQyxTQUFTRCxLQUFLRSxNQUFNLEtBQUssUUFBUUMsUUFBUTtBQUM3RCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcHB1c1xcRG93bmxvYWRzXFxwOSAtIENvcHlcXHA5XFxzcmNcXGxpYlxcYXV0aFxcand0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcblxuY29uc3QgSldUX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgJ2RlZmF1bHRfc2VjcmV0JztcblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlVG9rZW4odXNlcklkOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gand0LnNpZ24oeyB1c2VySWQgfSwgSldUX1NFQ1JFVCwgeyBleHBpcmVzSW46ICc3ZCcgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2ZXJpZnlUb2tlbih0b2tlbjogc3RyaW5nKTogeyB1c2VySWQ6IHN0cmluZyB9IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gand0LnZlcmlmeSh0b2tlbiwgSldUX1NFQ1JFVCkgYXMgeyB1c2VySWQ6IHN0cmluZyB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB0b2tlbicpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVZlcmlmaWNhdGlvblRva2VuKCk6IHN0cmluZyB7XG4gIHJldHVybiBqd3Quc2lnbih7fSwgSldUX1NFQ1JFVCwgeyBleHBpcmVzSW46ICcxaCcgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVPVFAoKTogc3RyaW5nIHtcbiAgcmV0dXJuIE1hdGguZmxvb3IoMTAwMDAwICsgTWF0aC5yYW5kb20oKSAqIDkwMDAwMCkudG9TdHJpbmcoKTtcbn0iXSwibmFtZXMiOlsiand0IiwiSldUX1NFQ1JFVCIsInByb2Nlc3MiLCJlbnYiLCJnZW5lcmF0ZVRva2VuIiwidXNlcklkIiwic2lnbiIsImV4cGlyZXNJbiIsInZlcmlmeVRva2VuIiwidG9rZW4iLCJ2ZXJpZnkiLCJlcnJvciIsIkVycm9yIiwiZ2VuZXJhdGVWZXJpZmljYXRpb25Ub2tlbiIsImdlbmVyYXRlT1RQIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwidG9TdHJpbmciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/auth/jwt.ts\n");

/***/ }),

/***/ "(api)/./src/lib/db/connect.ts":
/*!*******************************!*\
  !*** ./src/lib/db/connect.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error('Please define the MONGODB_URI environment variable');\n}\nlet cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function connectDB() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const opts = {\n            bufferCommands: false\n        };\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts);\n    }\n    try {\n        cached.conn = await cached.promise;\n        return cached.conn;\n    } catch (e) {\n        cached.promise = null;\n        throw e;\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (connectDB);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2RiL2Nvbm5lY3QudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdDO0FBRWhDLE1BQU1DLGNBQWNDLFFBQVFDLEdBQUcsQ0FBQ0YsV0FBVztBQUUzQyxJQUFJLENBQUNBLGFBQWE7SUFDaEIsTUFBTSxJQUFJRyxNQUFNO0FBQ2xCO0FBRUEsSUFBSUMsU0FBU0MsT0FBT04sUUFBUTtBQUU1QixJQUFJLENBQUNLLFFBQVE7SUFDWEEsU0FBU0MsT0FBT04sUUFBUSxHQUFHO1FBQUVPLE1BQU07UUFBTUMsU0FBUztJQUFLO0FBQ3pEO0FBRUEsZUFBZUM7SUFDYixJQUFJSixPQUFPRSxJQUFJLEVBQUU7UUFDZixPQUFPRixPQUFPRSxJQUFJO0lBQ3BCO0lBRUEsSUFBSSxDQUFDRixPQUFPRyxPQUFPLEVBQUU7UUFDbkIsTUFBTUUsT0FBTztZQUNYQyxnQkFBZ0I7UUFDbEI7UUFFQU4sT0FBT0csT0FBTyxHQUFHUix1REFBZ0IsQ0FBQ0MsYUFBYVM7SUFDakQ7SUFFQSxJQUFJO1FBQ0ZMLE9BQU9FLElBQUksR0FBRyxNQUFNRixPQUFPRyxPQUFPO1FBQ2xDLE9BQU9ILE9BQU9FLElBQUk7SUFDcEIsRUFBRSxPQUFPTSxHQUFHO1FBQ1ZSLE9BQU9HLE9BQU8sR0FBRztRQUNqQixNQUFNSztJQUNSO0FBQ0Y7QUFFQSxpRUFBZUosU0FBU0EsRUFBQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcHB1c1xcRG93bmxvYWRzXFxwOSAtIENvcHlcXHA5XFxzcmNcXGxpYlxcZGJcXGNvbm5lY3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcblxuY29uc3QgTU9OR09EQl9VUkkgPSBwcm9jZXNzLmVudi5NT05HT0RCX1VSSTtcblxuaWYgKCFNT05HT0RCX1VSSSkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBkZWZpbmUgdGhlIE1PTkdPREJfVVJJIGVudmlyb25tZW50IHZhcmlhYmxlJyk7XG59XG5cbmxldCBjYWNoZWQgPSBnbG9iYWwubW9uZ29vc2U7XG5cbmlmICghY2FjaGVkKSB7XG4gIGNhY2hlZCA9IGdsb2JhbC5tb25nb29zZSA9IHsgY29ubjogbnVsbCwgcHJvbWlzZTogbnVsbCB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBjb25uZWN0REIoKSB7XG4gIGlmIChjYWNoZWQuY29ubikge1xuICAgIHJldHVybiBjYWNoZWQuY29ubjtcbiAgfVxuXG4gIGlmICghY2FjaGVkLnByb21pc2UpIHtcbiAgICBjb25zdCBvcHRzID0ge1xuICAgICAgYnVmZmVyQ29tbWFuZHM6IGZhbHNlLFxuICAgIH07XG5cbiAgICBjYWNoZWQucHJvbWlzZSA9IG1vbmdvb3NlLmNvbm5lY3QoTU9OR09EQl9VUkksIG9wdHMpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjYWNoZWQuY29ubiA9IGF3YWl0IGNhY2hlZC5wcm9taXNlO1xuICAgIHJldHVybiBjYWNoZWQuY29ubjtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNhY2hlZC5wcm9taXNlID0gbnVsbDtcbiAgICB0aHJvdyBlO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3REQjsiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJNT05HT0RCX1VSSSIsInByb2Nlc3MiLCJlbnYiLCJFcnJvciIsImNhY2hlZCIsImdsb2JhbCIsImNvbm4iLCJwcm9taXNlIiwiY29ubmVjdERCIiwib3B0cyIsImJ1ZmZlckNvbW1hbmRzIiwiY29ubmVjdCIsImUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/db/connect.ts\n");

/***/ }),

/***/ "(api)/./src/lib/db/models/User.ts":
/*!***********************************!*\
  !*** ./src/lib/db/models/User.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   User: () => (/* binding */ User)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst userSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    fullName: {\n        type: String,\n        required: true\n    },\n    email: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    password: {\n        type: String,\n        required: function() {\n            return !this.googleId;\n        }\n    },\n    googleId: {\n        type: String,\n        sparse: true\n    },\n    role: {\n        type: String,\n        enum: [\n            'student',\n            'faculty'\n        ],\n        required: true\n    },\n    department: {\n        type: String,\n        required: true\n    },\n    phoneNumber: {\n        type: String,\n        required: true\n    },\n    semester: {\n        type: Number,\n        required: function() {\n            return this.role === 'student';\n        }\n    },\n    secretNumber: {\n        type: String,\n        required: function() {\n            return this.role === 'faculty';\n        }\n    },\n    isEmailVerified: {\n        type: Boolean,\n        default: false\n    },\n    verificationToken: String,\n    verificationTokenExpiry: Date,\n    verificationOTP: String,\n    verificationOTPExpiry: Date,\n    verificationCode: String,\n    verificationCodeExpiry: Date,\n    createdAt: {\n        type: Date,\n        default: Date.now\n    }\n});\n// Hash password before saving\nuserSchema.pre('save', async function(next) {\n    if (this.isModified('password') && this.password) {\n        this.password = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().hash(this.password, 10);\n    }\n    next();\n});\n// Method to compare password\nuserSchema.methods.comparePassword = async function(candidatePassword) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().compare(candidatePassword, this.password);\n};\nconst User = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).User || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('User', userSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2RiL21vZGVscy9Vc2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQWdDO0FBQ0Y7QUFFOUIsTUFBTUUsYUFBYSxJQUFJRix3REFBZSxDQUFDO0lBQ3JDSSxVQUFVO1FBQ1JDLE1BQU1DO1FBQ05DLFVBQVU7SUFDWjtJQUNBQyxPQUFPO1FBQ0xILE1BQU1DO1FBQ05DLFVBQVU7UUFDVkUsUUFBUTtJQUNWO0lBQ0FDLFVBQVU7UUFDUkwsTUFBTUM7UUFDTkMsVUFBVTtZQUNSLE9BQU8sQ0FBQyxJQUFJLENBQUNJLFFBQVE7UUFDdkI7SUFDRjtJQUNBQSxVQUFVO1FBQ1JOLE1BQU1DO1FBQ05NLFFBQVE7SUFDVjtJQUNBQyxNQUFNO1FBQ0pSLE1BQU1DO1FBQ05RLE1BQU07WUFBQztZQUFXO1NBQVU7UUFDNUJQLFVBQVU7SUFDWjtJQUNBUSxZQUFZO1FBQ1ZWLE1BQU1DO1FBQ05DLFVBQVU7SUFDWjtJQUNBUyxhQUFhO1FBQ1hYLE1BQU1DO1FBQ05DLFVBQVU7SUFDWjtJQUNBVSxVQUFVO1FBQ1JaLE1BQU1hO1FBQ05YLFVBQVU7WUFDUixPQUFPLElBQUksQ0FBQ00sSUFBSSxLQUFLO1FBQ3ZCO0lBQ0Y7SUFDQU0sY0FBYztRQUNaZCxNQUFNQztRQUNOQyxVQUFVO1lBQ1IsT0FBTyxJQUFJLENBQUNNLElBQUksS0FBSztRQUN2QjtJQUNGO0lBQ0FPLGlCQUFpQjtRQUNmZixNQUFNZ0I7UUFDTkMsU0FBUztJQUNYO0lBQ0FDLG1CQUFtQmpCO0lBQ25Ca0IseUJBQXlCQztJQUN6QkMsaUJBQWlCcEI7SUFDakJxQix1QkFBdUJGO0lBQ3ZCRyxrQkFBa0J0QjtJQUNsQnVCLHdCQUF3Qko7SUFDeEJLLFdBQVc7UUFDVHpCLE1BQU1vQjtRQUNOSCxTQUFTRyxLQUFLTSxHQUFHO0lBQ25CO0FBQ0Y7QUFFQSw4QkFBOEI7QUFDOUI3QixXQUFXOEIsR0FBRyxDQUFDLFFBQVEsZUFBZUMsSUFBSTtJQUN4QyxJQUFJLElBQUksQ0FBQ0MsVUFBVSxDQUFDLGVBQWUsSUFBSSxDQUFDeEIsUUFBUSxFQUFFO1FBQ2hELElBQUksQ0FBQ0EsUUFBUSxHQUFHLE1BQU1ULG9EQUFXLENBQUMsSUFBSSxDQUFDUyxRQUFRLEVBQUU7SUFDbkQ7SUFDQXVCO0FBQ0Y7QUFFQSw2QkFBNkI7QUFDN0IvQixXQUFXa0MsT0FBTyxDQUFDQyxlQUFlLEdBQUcsZUFBZUMsaUJBQXlCO0lBQzNFLE9BQU9yQyx1REFBYyxDQUFDcUMsbUJBQW1CLElBQUksQ0FBQzVCLFFBQVE7QUFDeEQ7QUFFTyxNQUFNOEIsT0FBT3hDLHdEQUFlLENBQUN3QyxJQUFJLElBQUl4QyxxREFBYyxDQUFDLFFBQVFFLFlBQVkiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBwdXNcXERvd25sb2Fkc1xccDkgLSBDb3B5XFxwOVxcc3JjXFxsaWJcXGRiXFxtb2RlbHNcXFVzZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xuXG5jb25zdCB1c2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gIGZ1bGxOYW1lOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICB9LFxuICBlbWFpbDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB1bmlxdWU6IHRydWUsXG4gIH0sXG4gIHBhc3N3b3JkOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAhdGhpcy5nb29nbGVJZDtcbiAgICB9LFxuICB9LFxuICBnb29nbGVJZDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICBzcGFyc2U6IHRydWUsXG4gIH0sXG4gIHJvbGU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZW51bTogWydzdHVkZW50JywgJ2ZhY3VsdHknXSxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgZGVwYXJ0bWVudDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgcGhvbmVOdW1iZXI6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gIH0sXG4gIHNlbWVzdGVyOiB7XG4gICAgdHlwZTogTnVtYmVyLFxuICAgIHJlcXVpcmVkOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnJvbGUgPT09ICdzdHVkZW50JztcbiAgICB9LFxuICB9LFxuICBzZWNyZXROdW1iZXI6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMucm9sZSA9PT0gJ2ZhY3VsdHknO1xuICAgIH0sXG4gIH0sXG4gIGlzRW1haWxWZXJpZmllZDoge1xuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gIH0sXG4gIHZlcmlmaWNhdGlvblRva2VuOiBTdHJpbmcsXG4gIHZlcmlmaWNhdGlvblRva2VuRXhwaXJ5OiBEYXRlLFxuICB2ZXJpZmljYXRpb25PVFA6IFN0cmluZyxcbiAgdmVyaWZpY2F0aW9uT1RQRXhwaXJ5OiBEYXRlLFxuICB2ZXJpZmljYXRpb25Db2RlOiBTdHJpbmcsXG4gIHZlcmlmaWNhdGlvbkNvZGVFeHBpcnk6IERhdGUsXG4gIGNyZWF0ZWRBdDoge1xuICAgIHR5cGU6IERhdGUsXG4gICAgZGVmYXVsdDogRGF0ZS5ub3csXG4gIH0sXG59KTtcblxuLy8gSGFzaCBwYXNzd29yZCBiZWZvcmUgc2F2aW5nXG51c2VyU2NoZW1hLnByZSgnc2F2ZScsIGFzeW5jIGZ1bmN0aW9uKG5leHQpIHtcbiAgaWYgKHRoaXMuaXNNb2RpZmllZCgncGFzc3dvcmQnKSAmJiB0aGlzLnBhc3N3b3JkKSB7XG4gICAgdGhpcy5wYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHRoaXMucGFzc3dvcmQsIDEwKTtcbiAgfVxuICBuZXh0KCk7XG59KTtcblxuLy8gTWV0aG9kIHRvIGNvbXBhcmUgcGFzc3dvcmRcbnVzZXJTY2hlbWEubWV0aG9kcy5jb21wYXJlUGFzc3dvcmQgPSBhc3luYyBmdW5jdGlvbihjYW5kaWRhdGVQYXNzd29yZDogc3RyaW5nKSB7XG4gIHJldHVybiBiY3J5cHQuY29tcGFyZShjYW5kaWRhdGVQYXNzd29yZCwgdGhpcy5wYXNzd29yZCk7XG59O1xuXG5leHBvcnQgY29uc3QgVXNlciA9IG1vbmdvb3NlLm1vZGVscy5Vc2VyIHx8IG1vbmdvb3NlLm1vZGVsKCdVc2VyJywgdXNlclNjaGVtYSk7Il0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiYmNyeXB0IiwidXNlclNjaGVtYSIsIlNjaGVtYSIsImZ1bGxOYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiZW1haWwiLCJ1bmlxdWUiLCJwYXNzd29yZCIsImdvb2dsZUlkIiwic3BhcnNlIiwicm9sZSIsImVudW0iLCJkZXBhcnRtZW50IiwicGhvbmVOdW1iZXIiLCJzZW1lc3RlciIsIk51bWJlciIsInNlY3JldE51bWJlciIsImlzRW1haWxWZXJpZmllZCIsIkJvb2xlYW4iLCJkZWZhdWx0IiwidmVyaWZpY2F0aW9uVG9rZW4iLCJ2ZXJpZmljYXRpb25Ub2tlbkV4cGlyeSIsIkRhdGUiLCJ2ZXJpZmljYXRpb25PVFAiLCJ2ZXJpZmljYXRpb25PVFBFeHBpcnkiLCJ2ZXJpZmljYXRpb25Db2RlIiwidmVyaWZpY2F0aW9uQ29kZUV4cGlyeSIsImNyZWF0ZWRBdCIsIm5vdyIsInByZSIsIm5leHQiLCJpc01vZGlmaWVkIiwiaGFzaCIsIm1ldGhvZHMiLCJjb21wYXJlUGFzc3dvcmQiLCJjYW5kaWRhdGVQYXNzd29yZCIsImNvbXBhcmUiLCJVc2VyIiwibW9kZWxzIiwibW9kZWwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/db/models/User.ts\n");

/***/ }),

/***/ "(api)/./src/lib/email/config.ts":
/*!*********************************!*\
  !*** ./src/lib/email/config.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   emailConfig: () => (/* binding */ emailConfig),\n/* harmony export */   transporter: () => (/* binding */ transporter),\n/* harmony export */   verifyEmailConfig: () => (/* binding */ verifyEmailConfig)\n/* harmony export */ });\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nodemailer */ \"nodemailer\");\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(nodemailer__WEBPACK_IMPORTED_MODULE_0__);\n\n// Email configuration\nconst emailConfig = {\n    host: 'smtp.gmail.com',\n    port: 587,\n    secure: false,\n    auth: {\n        user: process.env.EMAIL_USER,\n        pass: process.env.EMAIL_PASS\n    },\n    tls: {\n        rejectUnauthorized: false // Allow self-signed certificates\n    }\n};\n// Create transporter\nconst transporter = nodemailer__WEBPACK_IMPORTED_MODULE_0___default().createTransport({\n    service: 'gmail',\n    auth: {\n        user: process.env.EMAIL_USER,\n        pass: process.env.EMAIL_PASS\n    }\n});\n// Verify email configuration\nconst verifyEmailConfig = async ()=>{\n    try {\n        await transporter.verify();\n        console.log('Email configuration verified successfully');\n        return true;\n    } catch (error) {\n        console.error('Email configuration error:', error);\n        return false;\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2VtYWlsL2NvbmZpZy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUNvQztBQUVwQyxzQkFBc0I7QUFDZixNQUFNQyxjQUFjO0lBQ3pCQyxNQUFNO0lBQ05DLE1BQU07SUFDTkMsUUFBUTtJQUNSQyxNQUFNO1FBQ0pDLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0MsVUFBVTtRQUM1QkMsTUFBTUgsUUFBUUMsR0FBRyxDQUFDRyxVQUFVO0lBQzlCO0lBQ0FDLEtBQUs7UUFDSEMsb0JBQW9CLE1BQU0saUNBQWlDO0lBQzdEO0FBQ0YsRUFBRTtBQUVGLHFCQUFxQjtBQUNkLE1BQU1DLGNBQWNkLGlFQUEwQixDQUFDO0lBQ3BEZ0IsU0FBUztJQUNUWCxNQUFNO1FBQ0pDLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0MsVUFBVTtRQUM1QkMsTUFBTUgsUUFBUUMsR0FBRyxDQUFDRyxVQUFVO0lBQzlCO0FBQ0YsR0FBRztBQUNILDZCQUE2QjtBQUN0QixNQUFNTSxvQkFBb0I7SUFDL0IsSUFBSTtRQUNGLE1BQU1ILFlBQVlJLE1BQU07UUFDeEJDLFFBQVFDLEdBQUcsQ0FBQztRQUNaLE9BQU87SUFDVCxFQUFFLE9BQU9DLE9BQU87UUFDZEYsUUFBUUUsS0FBSyxDQUFDLDhCQUE4QkE7UUFDNUMsT0FBTztJQUNUO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcHB1c1xcRG93bmxvYWRzXFxwOSAtIENvcHlcXHA5XFxzcmNcXGxpYlxcZW1haWxcXGNvbmZpZy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVUcmFuc3BvcnQgfSBmcm9tICdub2RlbWFpbGVyJztcbmltcG9ydCBub2RlbWFpbGVyIGZyb20gJ25vZGVtYWlsZXInO1xuXG4vLyBFbWFpbCBjb25maWd1cmF0aW9uXG5leHBvcnQgY29uc3QgZW1haWxDb25maWcgPSB7XG4gIGhvc3Q6ICdzbXRwLmdtYWlsLmNvbScsXG4gIHBvcnQ6IDU4NyxcbiAgc2VjdXJlOiBmYWxzZSxcbiAgYXV0aDoge1xuICAgIHVzZXI6IHByb2Nlc3MuZW52LkVNQUlMX1VTRVIsXG4gICAgcGFzczogcHJvY2Vzcy5lbnYuRU1BSUxfUEFTU1xuICB9LFxuICB0bHM6IHtcbiAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlIC8vIEFsbG93IHNlbGYtc2lnbmVkIGNlcnRpZmljYXRlc1xuICB9XG59O1xuXG4vLyBDcmVhdGUgdHJhbnNwb3J0ZXJcbmV4cG9ydCBjb25zdCB0cmFuc3BvcnRlciA9IG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KHtcbiAgc2VydmljZTogJ2dtYWlsJyxcbiAgYXV0aDoge1xuICAgIHVzZXI6IHByb2Nlc3MuZW52LkVNQUlMX1VTRVIsXG4gICAgcGFzczogcHJvY2Vzcy5lbnYuRU1BSUxfUEFTU1xuICB9XG59KTtcbi8vIFZlcmlmeSBlbWFpbCBjb25maWd1cmF0aW9uXG5leHBvcnQgY29uc3QgdmVyaWZ5RW1haWxDb25maWcgPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgdHJhbnNwb3J0ZXIudmVyaWZ5KCk7XG4gICAgY29uc29sZS5sb2coJ0VtYWlsIGNvbmZpZ3VyYXRpb24gdmVyaWZpZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRW1haWwgY29uZmlndXJhdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59OyJdLCJuYW1lcyI6WyJub2RlbWFpbGVyIiwiZW1haWxDb25maWciLCJob3N0IiwicG9ydCIsInNlY3VyZSIsImF1dGgiLCJ1c2VyIiwicHJvY2VzcyIsImVudiIsIkVNQUlMX1VTRVIiLCJwYXNzIiwiRU1BSUxfUEFTUyIsInRscyIsInJlamVjdFVuYXV0aG9yaXplZCIsInRyYW5zcG9ydGVyIiwiY3JlYXRlVHJhbnNwb3J0Iiwic2VydmljZSIsInZlcmlmeUVtYWlsQ29uZmlnIiwidmVyaWZ5IiwiY29uc29sZSIsImxvZyIsImVycm9yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/lib/email/config.ts\n");

/***/ }),

/***/ "(api)/./src/lib/email/sendEmail.ts":
/*!************************************!*\
  !*** ./src/lib/email/sendEmail.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sendVerificationEmail: () => (/* binding */ sendVerificationEmail)\n/* harmony export */ });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ \"(api)/./src/lib/email/config.ts\");\n/* harmony import */ var _templates__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./templates */ \"(api)/./src/lib/email/templates.ts\");\n\n\nasync function sendVerificationEmail(email, token, otp) {\n    try {\n        console.log('Attempting to send verification email to:', email);\n        console.log('Sending verification email:', {\n            email,\n            otp,\n            token\n        });\n        const baseUrl = process.env.BASE_URL || 'http://localhost:5173';\n        const verificationLink = `${baseUrl}/verify-email?token=${token}`;\n        console.log('Verification link:', verificationLink);\n        const mailOptions = {\n            from: `\"Versatile Share\" <${process.env.EMAIL_USER}>`,\n            to: email,\n            subject: 'Verify your Versatile Share account',\n            html: (0,_templates__WEBPACK_IMPORTED_MODULE_1__.getVerificationEmailTemplate)(otp)\n        };\n        const info = await _config__WEBPACK_IMPORTED_MODULE_0__.transporter.sendMail(mailOptions);\n        console.log('Email sent successfully:', {\n            messageId: info.messageId,\n            recipient: email,\n            preview: info.messageId ? `https://mailtrap.io/inboxes/test/messages/${info.messageId}` : undefined\n        });\n        return true;\n    } catch (error) {\n        console.error('Failed to send verification email:', error);\n        throw new Error('Failed to send verification email');\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2VtYWlsL3NlbmRFbWFpbC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBdUM7QUFDb0I7QUFFcEQsZUFBZUUsc0JBQXNCQyxLQUFhLEVBQUVDLEtBQWEsRUFBQ0MsR0FBVTtJQUNqRixJQUFJO1FBQ0ZDLFFBQVFDLEdBQUcsQ0FBQyw2Q0FBNkNKO1FBQ3pERyxRQUFRQyxHQUFHLENBQUMsK0JBQStCO1lBQ3pDSjtZQUNBRTtZQUNBRDtRQUNGO1FBQ0EsTUFBTUksVUFBVUMsUUFBUUMsR0FBRyxDQUFDQyxRQUFRLElBQUk7UUFDeEMsTUFBTUMsbUJBQW1CLEdBQUdKLFFBQVEsb0JBQW9CLEVBQUVKLE9BQU87UUFFakVFLFFBQVFDLEdBQUcsQ0FBQyxzQkFBc0JLO1FBRWxDLE1BQU1DLGNBQWM7WUFDbEJDLE1BQU0sQ0FBQyxtQkFBbUIsRUFBRUwsUUFBUUMsR0FBRyxDQUFDSyxVQUFVLENBQUMsQ0FBQyxDQUFDO1lBQ3JEQyxJQUFJYjtZQUNKYyxTQUFTO1lBQ1RDLE1BQU1qQix3RUFBNEJBLENBQUNJO1FBQ3JDO1FBRUEsTUFBTWMsT0FBTyxNQUFNbkIsZ0RBQVdBLENBQUNvQixRQUFRLENBQUNQO1FBRXhDUCxRQUFRQyxHQUFHLENBQUMsNEJBQTRCO1lBQ3RDYyxXQUFXRixLQUFLRSxTQUFTO1lBQ3pCQyxXQUFXbkI7WUFDWG9CLFNBQVNKLEtBQUtFLFNBQVMsR0FBRyxDQUFDLDBDQUEwQyxFQUFFRixLQUFLRSxTQUFTLEVBQUUsR0FBR0c7UUFDNUY7UUFFQSxPQUFPO0lBQ1QsRUFBRSxPQUFPQyxPQUFPO1FBQ2RuQixRQUFRbUIsS0FBSyxDQUFDLHNDQUFzQ0E7UUFDcEQsTUFBTSxJQUFJQyxNQUFNO0lBQ2xCO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBwdXNcXERvd25sb2Fkc1xccDkgLSBDb3B5XFxwOVxcc3JjXFxsaWJcXGVtYWlsXFxzZW5kRW1haWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdHJhbnNwb3J0ZXIgfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgeyBnZXRWZXJpZmljYXRpb25FbWFpbFRlbXBsYXRlIH0gZnJvbSAnLi90ZW1wbGF0ZXMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VuZFZlcmlmaWNhdGlvbkVtYWlsKGVtYWlsOiBzdHJpbmcsIHRva2VuOiBzdHJpbmcsb3RwOnN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdBdHRlbXB0aW5nIHRvIHNlbmQgdmVyaWZpY2F0aW9uIGVtYWlsIHRvOicsIGVtYWlsKTtcbiAgICBjb25zb2xlLmxvZygnU2VuZGluZyB2ZXJpZmljYXRpb24gZW1haWw6Jywge1xuICAgICAgZW1haWwsXG4gICAgICBvdHAsXG4gICAgICB0b2tlblxuICAgIH0pO1xuICAgIGNvbnN0IGJhc2VVcmwgPSBwcm9jZXNzLmVudi5CQVNFX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDo1MTczJztcbiAgICBjb25zdCB2ZXJpZmljYXRpb25MaW5rID0gYCR7YmFzZVVybH0vdmVyaWZ5LWVtYWlsP3Rva2VuPSR7dG9rZW59YDtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnVmVyaWZpY2F0aW9uIGxpbms6JywgdmVyaWZpY2F0aW9uTGluayk7XG5cbiAgICBjb25zdCBtYWlsT3B0aW9ucyA9IHtcbiAgICAgIGZyb206IGBcIlZlcnNhdGlsZSBTaGFyZVwiIDwke3Byb2Nlc3MuZW52LkVNQUlMX1VTRVJ9PmAsXG4gICAgICB0bzogZW1haWwsXG4gICAgICBzdWJqZWN0OiAnVmVyaWZ5IHlvdXIgVmVyc2F0aWxlIFNoYXJlIGFjY291bnQnLFxuICAgICAgaHRtbDogZ2V0VmVyaWZpY2F0aW9uRW1haWxUZW1wbGF0ZShvdHApXG4gICAgfTtcblxuICAgIGNvbnN0IGluZm8gPSBhd2FpdCB0cmFuc3BvcnRlci5zZW5kTWFpbChtYWlsT3B0aW9ucyk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ0VtYWlsIHNlbnQgc3VjY2Vzc2Z1bGx5OicsIHtcbiAgICAgIG1lc3NhZ2VJZDogaW5mby5tZXNzYWdlSWQsXG4gICAgICByZWNpcGllbnQ6IGVtYWlsLFxuICAgICAgcHJldmlldzogaW5mby5tZXNzYWdlSWQgPyBgaHR0cHM6Ly9tYWlsdHJhcC5pby9pbmJveGVzL3Rlc3QvbWVzc2FnZXMvJHtpbmZvLm1lc3NhZ2VJZH1gIDogdW5kZWZpbmVkXG4gICAgfSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2VuZCB2ZXJpZmljYXRpb24gZW1haWw6JywgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHNlbmQgdmVyaWZpY2F0aW9uIGVtYWlsJyk7XG4gIH1cbn0iXSwibmFtZXMiOlsidHJhbnNwb3J0ZXIiLCJnZXRWZXJpZmljYXRpb25FbWFpbFRlbXBsYXRlIiwic2VuZFZlcmlmaWNhdGlvbkVtYWlsIiwiZW1haWwiLCJ0b2tlbiIsIm90cCIsImNvbnNvbGUiLCJsb2ciLCJiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIkJBU0VfVVJMIiwidmVyaWZpY2F0aW9uTGluayIsIm1haWxPcHRpb25zIiwiZnJvbSIsIkVNQUlMX1VTRVIiLCJ0byIsInN1YmplY3QiLCJodG1sIiwiaW5mbyIsInNlbmRNYWlsIiwibWVzc2FnZUlkIiwicmVjaXBpZW50IiwicHJldmlldyIsInVuZGVmaW5lZCIsImVycm9yIiwiRXJyb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/email/sendEmail.ts\n");

/***/ }),

/***/ "(api)/./src/lib/email/templates.ts":
/*!************************************!*\
  !*** ./src/lib/email/templates.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getVerificationEmailTemplate: () => (/* binding */ getVerificationEmailTemplate)\n/* harmony export */ });\nconst getVerificationEmailTemplate = (otp)=>`\n<!DOCTYPE html>\n<html>\n<head>\n  <style>\n    .container { font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; }\n    .button { background-color: #4F46E5; color: white; padding: 12px 24px; text-decoration: none; border-radius: 4px; display: inline-block; margin: 16px 0; }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <h1 style=\"color: #4F46E5;\">Welcome to Versatile Share!</h1>\n    <p>Please click the button below to verify your email address:</p>\n    <a href=\"\" class=\"button\">${otp}</a>\n    \n    <p>This verification link will expire in 24 hours.</p>\n  </div>\n</body>\n</html>\n`;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2VtYWlsL3RlbXBsYXRlcy50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQU8sTUFBTUEsK0JBQStCLENBQUNDLE1BQWdCLENBQUM7Ozs7Ozs7Ozs7Ozs7OEJBYWhDLEVBQUVBLElBQUk7Ozs7OztBQU1wQyxDQUFDLENBQUMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBwdXNcXERvd25sb2Fkc1xccDkgLSBDb3B5XFxwOVxcc3JjXFxsaWJcXGVtYWlsXFx0ZW1wbGF0ZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGdldFZlcmlmaWNhdGlvbkVtYWlsVGVtcGxhdGUgPSAob3RwOiBzdHJpbmcpID0+IGBcbjwhRE9DVFlQRSBodG1sPlxuPGh0bWw+XG48aGVhZD5cbiAgPHN0eWxlPlxuICAgIC5jb250YWluZXIgeyBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvOyB9XG4gICAgLmJ1dHRvbiB7IGJhY2tncm91bmQtY29sb3I6ICM0RjQ2RTU7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTJweCAyNHB4OyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGJvcmRlci1yYWRpdXM6IDRweDsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBtYXJnaW46IDE2cHggMDsgfVxuICA8L3N0eWxlPlxuPC9oZWFkPlxuPGJvZHk+XG4gIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cbiAgICA8aDEgc3R5bGU9XCJjb2xvcjogIzRGNDZFNTtcIj5XZWxjb21lIHRvIFZlcnNhdGlsZSBTaGFyZSE8L2gxPlxuICAgIDxwPlBsZWFzZSBjbGljayB0aGUgYnV0dG9uIGJlbG93IHRvIHZlcmlmeSB5b3VyIGVtYWlsIGFkZHJlc3M6PC9wPlxuICAgIDxhIGhyZWY9XCJcIiBjbGFzcz1cImJ1dHRvblwiPiR7b3RwfTwvYT5cbiAgICBcbiAgICA8cD5UaGlzIHZlcmlmaWNhdGlvbiBsaW5rIHdpbGwgZXhwaXJlIGluIDI0IGhvdXJzLjwvcD5cbiAgPC9kaXY+XG48L2JvZHk+XG48L2h0bWw+XG5gOyJdLCJuYW1lcyI6WyJnZXRWZXJpZmljYXRpb25FbWFpbFRlbXBsYXRlIiwib3RwIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/lib/email/templates.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/_middleware.ts":
/*!**************************************!*\
  !*** ./src/pages/api/_middleware.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler),\n/* harmony export */   runCorsMiddleware: () => (/* binding */ runCorsMiddleware),\n/* harmony export */   withDB: () => (/* binding */ withDB)\n/* harmony export */ });\n/* harmony import */ var _lib_db_connect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/db/connect */ \"(api)/./src/lib/db/connect.ts\");\n/* harmony import */ var cors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cors */ \"cors\");\n/* harmony import */ var cors__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(cors__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst withDB = (handler)=>async (req, res)=>{\n        try {\n            await runCorsMiddleware(req, res);\n            await (0,_lib_db_connect__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n            return handler(req, res);\n        } catch (error) {\n            console.error('API route error:', error);\n            return res.status(500).json({\n                error: 'Internal server error'\n            });\n        }\n    };\n// Helper method to wait for a middleware to execute before continuing\n// And to throw an error when an error happens in a middleware\nfunction runMiddleware(req, res) {\n    return new Promise((resolve, reject)=>{\n        corsMiddleware(req, res, (result)=>{\n            if (result instanceof Error) {\n                return reject(result);\n            }\n            return resolve(result);\n        });\n    });\n}\nfunction runCorsMiddleware(req, res) {\n    return new Promise((resolve, reject)=>{\n        corsMiddleware(req, res, (result)=>{\n            if (result instanceof Error) {\n                return reject(result);\n            }\n            return resolve(result);\n        });\n    });\n}\nconst corsMiddleware = cors__WEBPACK_IMPORTED_MODULE_1___default()({\n    origin: 'http://localhost:5173',\n    methods: [\n        'GET',\n        'POST',\n        'PUT',\n        'DELETE',\n        'OPTIONS'\n    ],\n    credentials: true,\n    allowedHeaders: [\n        'Content-Type',\n        'Authorization'\n    ],\n    allowedHeaders: [\n        'Content-Type',\n        'Authorization'\n    ]\n});\nasync function handler(req, res) {\n    await runMiddleware(req, res, corsMiddleware);\n    return res;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL19taWRkbGV3YXJlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUM2QztBQUNyQjtBQUlqQixNQUFNRSxTQUFTLENBQUNDLFVBQXFCLE9BQU9DLEtBQXFCQztRQUN0RSxJQUFJO1lBQ0YsTUFBTUMsa0JBQWtCRixLQUFLQztZQUM3QixNQUFNTCwyREFBU0E7WUFDZixPQUFPRyxRQUFRQyxLQUFLQztRQUN0QixFQUFFLE9BQU9FLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLG9CQUFvQkE7WUFDbEMsT0FBT0YsSUFBSUksTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUgsT0FBTztZQUF3QjtRQUMvRDtJQUNGLEVBQUM7QUFFRCxzRUFBc0U7QUFDdEUsOERBQThEO0FBQzlELFNBQVNJLGNBQWNQLEdBQW1CLEVBQUVDLEdBQW9CO0lBQzVELE9BQU8sSUFBSU8sUUFBUSxDQUFDQyxTQUFTQztRQUMzQkMsZUFBZVgsS0FBS0MsS0FBSyxDQUFDVztZQUN4QixJQUFJQSxrQkFBa0JDLE9BQU87Z0JBQzNCLE9BQU9ILE9BQU9FO1lBQ2hCO1lBQ0EsT0FBT0gsUUFBUUc7UUFDakI7SUFDRjtBQUNGO0FBQ08sU0FBU1Ysa0JBQWtCRixHQUFtQixFQUFFQyxHQUFvQjtJQUN6RSxPQUFPLElBQUlPLFFBQVEsQ0FBQ0MsU0FBU0M7UUFDM0JDLGVBQWVYLEtBQUtDLEtBQUssQ0FBQ1c7WUFDeEIsSUFBSUEsa0JBQWtCQyxPQUFPO2dCQUMzQixPQUFPSCxPQUFPRTtZQUNoQjtZQUNBLE9BQU9ILFFBQVFHO1FBQ2pCO0lBQ0Y7QUFDRjtBQUNBLE1BQU1ELGlCQUFpQmQsMkNBQUlBLENBQUM7SUFDMUJpQixRQUFRO0lBQ1JDLFNBQVM7UUFBQztRQUFPO1FBQVE7UUFBTztRQUFVO0tBQVU7SUFDcERDLGFBQWE7SUFDYkMsZ0JBQWdCO1FBQUM7UUFBZ0I7S0FBZ0I7SUFDakRBLGdCQUFnQjtRQUFDO1FBQWdCO0tBQWdCO0FBQ25EO0FBRWUsZUFBZWxCLFFBQVFDLEdBQW1CLEVBQUVDLEdBQW9CO0lBQzdFLE1BQU1NLGNBQWNQLEtBQUtDLEtBQUtVO0lBQzlCLE9BQU9WO0FBQ1QiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBwdXNcXERvd25sb2Fkc1xccDkgLSBDb3B5XFxwOVxcc3JjXFxwYWdlc1xcYXBpXFxfbWlkZGxld2FyZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0J1xyXG5pbXBvcnQgY29ubmVjdERCIGZyb20gJy4uLy4uL2xpYi9kYi9jb25uZWN0JztcclxuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XHJcblxyXG50eXBlIEhhbmRsZXIgPSAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IFByb21pc2U8dm9pZD5cclxuXHJcbmV4cG9ydCBjb25zdCB3aXRoREIgPSAoaGFuZGxlcjogSGFuZGxlcikgPT4gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IHJ1bkNvcnNNaWRkbGV3YXJlKHJlcSwgcmVzKTtcclxuICAgIGF3YWl0IGNvbm5lY3REQigpXHJcbiAgICByZXR1cm4gaGFuZGxlcihyZXEsIHJlcylcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignQVBJIHJvdXRlIGVycm9yOicsIGVycm9yKVxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pXHJcbiAgfVxyXG59XHJcblxyXG4vLyBIZWxwZXIgbWV0aG9kIHRvIHdhaXQgZm9yIGEgbWlkZGxld2FyZSB0byBleGVjdXRlIGJlZm9yZSBjb250aW51aW5nXHJcbi8vIEFuZCB0byB0aHJvdyBhbiBlcnJvciB3aGVuIGFuIGVycm9yIGhhcHBlbnMgaW4gYSBtaWRkbGV3YXJlXHJcbmZ1bmN0aW9uIHJ1bk1pZGRsZXdhcmUocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGNvcnNNaWRkbGV3YXJlKHJlcSwgcmVzLCAocmVzdWx0OiBhbnkpID0+IHtcclxuICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgIHJldHVybiByZWplY3QocmVzdWx0KVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzb2x2ZShyZXN1bHQpXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gIH1cclxuICBleHBvcnQgZnVuY3Rpb24gcnVuQ29yc01pZGRsZXdhcmUocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGNvcnNNaWRkbGV3YXJlKHJlcSwgcmVzLCAocmVzdWx0OiBhbnkpID0+IHtcclxuICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgIHJldHVybiByZWplY3QocmVzdWx0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc29sdmUocmVzdWx0KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgY29uc3QgY29yc01pZGRsZXdhcmUgPSBjb3JzKHtcclxuICAgIG9yaWdpbjogJ2h0dHA6Ly9sb2NhbGhvc3Q6NTE3MycsIC8vIFlvdXIgVml0ZSBmcm9udGVuZCBVUkxcclxuICAgIG1ldGhvZHM6IFsnR0VUJywgJ1BPU1QnLCAnUFVUJywgJ0RFTEVURScsICdPUFRJT05TJ10sXHJcbiAgICBjcmVkZW50aWFsczogdHJ1ZSxcclxuICAgIGFsbG93ZWRIZWFkZXJzOiBbJ0NvbnRlbnQtVHlwZScsICdBdXRob3JpemF0aW9uJ10sXHJcbiAgICBhbGxvd2VkSGVhZGVyczogWydDb250ZW50LVR5cGUnLCAnQXV0aG9yaXphdGlvbiddLFxyXG4gIH0pXHJcbiAgXHJcbiAgZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xyXG4gICAgYXdhaXQgcnVuTWlkZGxld2FyZShyZXEsIHJlcywgY29yc01pZGRsZXdhcmUpXHJcbiAgICByZXR1cm4gcmVzXHJcbiAgfSJdLCJuYW1lcyI6WyJjb25uZWN0REIiLCJjb3JzIiwid2l0aERCIiwiaGFuZGxlciIsInJlcSIsInJlcyIsInJ1bkNvcnNNaWRkbGV3YXJlIiwiZXJyb3IiLCJjb25zb2xlIiwic3RhdHVzIiwianNvbiIsInJ1bk1pZGRsZXdhcmUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImNvcnNNaWRkbGV3YXJlIiwicmVzdWx0IiwiRXJyb3IiLCJvcmlnaW4iLCJtZXRob2RzIiwiY3JlZGVudGlhbHMiLCJhbGxvd2VkSGVhZGVycyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/_middleware.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/auth/signup.ts":
/*!**************************************!*\
  !*** ./src/pages/api/auth/signup.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_db_connect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/db/connect */ \"(api)/./src/lib/db/connect.ts\");\n/* harmony import */ var cors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cors */ \"cors\");\n/* harmony import */ var cors__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(cors__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_db_models_User__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/db/models/User */ \"(api)/./src/lib/db/models/User.ts\");\n/* harmony import */ var _lib_auth_jwt__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../lib/auth/jwt */ \"(api)/./src/lib/auth/jwt.ts\");\n/* harmony import */ var _lib_email_sendEmail__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../lib/email/sendEmail */ \"(api)/./src/lib/email/sendEmail.ts\");\n/* harmony import */ var _middleware__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_middleware */ \"(api)/./src/pages/api/_middleware.ts\");\n\n\n\n\n\n\nconst corsMiddleware = cors__WEBPACK_IMPORTED_MODULE_1___default()({\n    origin: 'http://localhost:5173',\n    methods: [\n        'POST',\n        'OPTIONS'\n    ],\n    credentials: true\n});\nconst runMiddleware = (req, res, fn)=>new Promise((resolve, reject)=>{\n        fn(req, res, (result)=>{\n            if (result instanceof Error) {\n                return reject(result);\n            }\n            return resolve(result);\n        });\n    });\nasync function handler(req, res) {\n    await runMiddleware(req, res, corsMiddleware);\n    if (req.method !== 'POST') {\n        return res.status(405).json({\n            error: 'Method not allowed'\n        });\n    }\n    try {\n        await (0,_lib_db_connect__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        const { email, password, fullName, role, department, phoneNumber, secretNumber, semester } = req.body;\n        // Check if user already exists\n        const existingUser = await _lib_db_models_User__WEBPACK_IMPORTED_MODULE_2__.User.findOne({\n            email\n        });\n        if (existingUser) {\n            return res.status(400).json({\n                error: 'Email already registered'\n            });\n        }\n        // Validate faculty secret number\n        if (role === 'faculty' && (!secretNumber || secretNumber !== 'FACULTY2024')) {\n            return res.status(400).json({\n                error: 'Invalid faculty secret number'\n            });\n        }\n        const otp = (0,_lib_auth_jwt__WEBPACK_IMPORTED_MODULE_3__.generateOTP)();\n        const verificationToken = (0,_lib_auth_jwt__WEBPACK_IMPORTED_MODULE_3__.generateVerificationToken)();\n        const userData = {\n            email,\n            password,\n            fullName,\n            role,\n            department,\n            phoneNumber,\n            verificationToken,\n            verificationTokenExpiry: new Date(Date.now() + 24 * 60 * 60 * 1000),\n            verificationCode: otp,\n            verificationCodeExpiry: new Date(Date.now() + 10 * 60 * 1000) // 10 minutes expiry\n        };\n        if (role === 'faculty') {\n            userData.secretNumber = secretNumber;\n        }\n        if (role === 'student') {\n            userData.semester = semester;\n        }\n        const user = new _lib_db_models_User__WEBPACK_IMPORTED_MODULE_2__.User(userData);\n        await user.save();\n        await (0,_lib_email_sendEmail__WEBPACK_IMPORTED_MODULE_4__.sendVerificationEmail)(email, verificationToken, otp);\n        return res.status(201).json({\n            message: 'User created successfully'\n        });\n    } catch (error) {\n        console.error('Signup error:', error);\n        return res.status(500).json({\n            error: 'Internal server error'\n        });\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_middleware__WEBPACK_IMPORTED_MODULE_5__.withDB)(handler));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2F1dGgvc2lnbnVwLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBR2dEO0FBQ3hCO0FBRTBCO0FBQzJCO0FBQ1Q7QUFDN0I7QUFHdkMsTUFBTU8saUJBQWlCTiwyQ0FBSUEsQ0FBQztJQUMxQk8sUUFBUTtJQUNSQyxTQUFTO1FBQUM7UUFBUTtLQUFVO0lBQzVCQyxhQUFhO0FBQ2Y7QUFFQSxNQUFNQyxnQkFBZ0IsQ0FBQ0MsS0FBcUJDLEtBQXNCQyxLQUNoRSxJQUFJQyxRQUFRLENBQUNDLFNBQVNDO1FBQ3BCSCxHQUFHRixLQUFLQyxLQUFLLENBQUNLO1lBQ1osSUFBSUEsa0JBQWtCQyxPQUFPO2dCQUMzQixPQUFPRixPQUFPQztZQUNoQjtZQUNBLE9BQU9GLFFBQVFFO1FBQ2pCO0lBQ0Y7QUFHRixlQUFlRSxRQUFRUixHQUFtQixFQUFFQyxHQUFvQjtJQUU5RCxNQUFNRixjQUFjQyxLQUFLQyxLQUFLTjtJQUU5QixJQUFJSyxJQUFJUyxNQUFNLEtBQUssUUFBUTtRQUN6QixPQUFPUixJQUFJUyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBcUI7SUFDNUQ7SUFFQSxJQUFJO1FBQ0YsTUFBTXhCLDJEQUFTQTtRQUNmLE1BQU0sRUFBRXlCLEtBQUssRUFBRUMsUUFBUSxFQUFFQyxRQUFRLEVBQUVDLElBQUksRUFBRUMsVUFBVSxFQUFFQyxXQUFXLEVBQUVDLFlBQVksRUFBRUMsUUFBUSxFQUFFLEdBQUdwQixJQUFJcUIsSUFBSTtRQUVyRywrQkFBK0I7UUFDL0IsTUFBTUMsZUFBZSxNQUFNaEMscURBQUlBLENBQUNpQyxPQUFPLENBQUM7WUFBRVY7UUFBTTtRQUNoRCxJQUFJUyxjQUFjO1lBQ2hCLE9BQU9yQixJQUFJUyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQTJCO1FBQ2xFO1FBRUEsaUNBQWlDO1FBQ2pDLElBQUlJLFNBQVMsYUFBYyxFQUFDRyxnQkFBZ0JBLGlCQUFpQixhQUFZLEdBQUk7WUFDM0UsT0FBT2xCLElBQUlTLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBZ0M7UUFDdkU7UUFDQSxNQUFNWSxNQUFNakMsMERBQVdBO1FBQ3ZCLE1BQU1rQyxvQkFBb0JqQyx3RUFBeUJBO1FBRW5ELE1BQU1rQyxXQUFXO1lBQ2ZiO1lBQ0FDO1lBQ0FDO1lBQ0FDO1lBQ0FDO1lBQ0FDO1lBQ0FPO1lBQ0FFLHlCQUF5QixJQUFJQyxLQUFLQSxLQUFLQyxHQUFHLEtBQUssS0FBSyxLQUFLLEtBQUs7WUFDOURDLGtCQUFrQk47WUFDbEJPLHdCQUF3QixJQUFJSCxLQUFLQSxLQUFLQyxHQUFHLEtBQUssS0FBSyxLQUFLLE1BQU0sb0JBQW9CO1FBQ3BGO1FBRUEsSUFBSWIsU0FBUyxXQUFXO1lBQ3RCVSxTQUFTUCxZQUFZLEdBQUdBO1FBQzFCO1FBQ0EsSUFBSUgsU0FBUyxXQUFXO1lBQ3RCVSxTQUFTTixRQUFRLEdBQUdBO1FBQ3RCO1FBRUEsTUFBTVksT0FBTyxJQUFJMUMscURBQUlBLENBQUNvQztRQUN0QixNQUFNTSxLQUFLQyxJQUFJO1FBRWYsTUFBTXhDLDJFQUFxQkEsQ0FBQ29CLE9BQU9ZLG1CQUFrQkQ7UUFFckQsT0FBT3ZCLElBQUlTLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRXVCLFNBQVM7UUFBNEI7SUFDckUsRUFBRSxPQUFPdEIsT0FBTztRQUNkdUIsUUFBUXZCLEtBQUssQ0FBQyxpQkFBaUJBO1FBQy9CLE9BQU9YLElBQUlTLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUF3QjtJQUMvRDtBQUNGO0FBRUEsaUVBQWVsQixtREFBTUEsQ0FBQ2MsUUFBUUEsRUFBQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcHB1c1xcRG93bmxvYWRzXFxwOSAtIENvcHlcXHA5XFxzcmNcXHBhZ2VzXFxhcGlcXGF1dGhcXHNpZ251cC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcblxuXG5pbXBvcnQgY29ubmVjdERCIGZyb20gJy4uLy4uLy4uL2xpYi9kYi9jb25uZWN0JztcbmltcG9ydCBjb3JzIGZyb20gJ2NvcnMnO1xuaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCdcbmltcG9ydCB7IFVzZXIgfSBmcm9tICcuLi8uLi8uLi9saWIvZGIvbW9kZWxzL1VzZXInXG5pbXBvcnQgeyBnZW5lcmF0ZU9UUCxnZW5lcmF0ZVZlcmlmaWNhdGlvblRva2VuIH0gZnJvbSAnLi4vLi4vLi4vbGliL2F1dGgvand0J1xuaW1wb3J0IHsgc2VuZFZlcmlmaWNhdGlvbkVtYWlsIH0gZnJvbSAnLi4vLi4vLi4vbGliL2VtYWlsL3NlbmRFbWFpbCdcbmltcG9ydCB7IHdpdGhEQiB9IGZyb20gJy4uL19taWRkbGV3YXJlJ1xuXG5cbmNvbnN0IGNvcnNNaWRkbGV3YXJlID0gY29ycyh7XG4gIG9yaWdpbjogJ2h0dHA6Ly9sb2NhbGhvc3Q6NTE3MycsXG4gIG1ldGhvZHM6IFsnUE9TVCcsICdPUFRJT05TJ10sXG4gIGNyZWRlbnRpYWxzOiB0cnVlLFxufSlcblxuY29uc3QgcnVuTWlkZGxld2FyZSA9IChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSwgZm46IEZ1bmN0aW9uKSA9PlxuICBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgZm4ocmVxLCByZXMsIChyZXN1bHQ6IGFueSkgPT4ge1xuICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIHJldHVybiByZWplY3QocmVzdWx0KVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc29sdmUocmVzdWx0KVxuICAgIH0pXG4gIH0pXG5cblxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xuICBcbiAgYXdhaXQgcnVuTWlkZGxld2FyZShyZXEsIHJlcywgY29yc01pZGRsZXdhcmUpXG4gIFxuICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pXG4gIH1cblxuICB0cnkge1xuICAgIGF3YWl0IGNvbm5lY3REQigpXG4gICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQsIGZ1bGxOYW1lLCByb2xlLCBkZXBhcnRtZW50LCBwaG9uZU51bWJlciwgc2VjcmV0TnVtYmVyLCBzZW1lc3RlciB9ID0gcmVxLmJvZHlcblxuICAgIC8vIENoZWNrIGlmIHVzZXIgYWxyZWFkeSBleGlzdHNcbiAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9KVxuICAgIGlmIChleGlzdGluZ1VzZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnRW1haWwgYWxyZWFkeSByZWdpc3RlcmVkJyB9KVxuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIGZhY3VsdHkgc2VjcmV0IG51bWJlclxuICAgIGlmIChyb2xlID09PSAnZmFjdWx0eScgJiYgKCFzZWNyZXROdW1iZXIgfHwgc2VjcmV0TnVtYmVyICE9PSAnRkFDVUxUWTIwMjQnKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGZhY3VsdHkgc2VjcmV0IG51bWJlcicgfSlcbiAgICB9XG4gICAgY29uc3Qgb3RwID0gZ2VuZXJhdGVPVFAoKTtcbiAgICBjb25zdCB2ZXJpZmljYXRpb25Ub2tlbiA9IGdlbmVyYXRlVmVyaWZpY2F0aW9uVG9rZW4oKVxuXG4gICAgY29uc3QgdXNlckRhdGEgPSB7XG4gICAgICBlbWFpbCxcbiAgICAgIHBhc3N3b3JkLFxuICAgICAgZnVsbE5hbWUsXG4gICAgICByb2xlLFxuICAgICAgZGVwYXJ0bWVudCxcbiAgICAgIHBob25lTnVtYmVyLFxuICAgICAgdmVyaWZpY2F0aW9uVG9rZW4sXG4gICAgICB2ZXJpZmljYXRpb25Ub2tlbkV4cGlyeTogbmV3IERhdGUoRGF0ZS5ub3coKSArIDI0ICogNjAgKiA2MCAqIDEwMDApLFxuICAgICAgdmVyaWZpY2F0aW9uQ29kZTogb3RwLFxuICAgICAgdmVyaWZpY2F0aW9uQ29kZUV4cGlyeTogbmV3IERhdGUoRGF0ZS5ub3coKSArIDEwICogNjAgKiAxMDAwKSAvLyAxMCBtaW51dGVzIGV4cGlyeVxuICAgIH1cblxuICAgIGlmIChyb2xlID09PSAnZmFjdWx0eScpIHtcbiAgICAgIHVzZXJEYXRhLnNlY3JldE51bWJlciA9IHNlY3JldE51bWJlclxuICAgIH1cbiAgICBpZiAocm9sZSA9PT0gJ3N0dWRlbnQnKSB7XG4gICAgICB1c2VyRGF0YS5zZW1lc3RlciA9IHNlbWVzdGVyXG4gICAgfVxuXG4gICAgY29uc3QgdXNlciA9IG5ldyBVc2VyKHVzZXJEYXRhKVxuICAgIGF3YWl0IHVzZXIuc2F2ZSgpXG5cbiAgICBhd2FpdCBzZW5kVmVyaWZpY2F0aW9uRW1haWwoZW1haWwsIHZlcmlmaWNhdGlvblRva2VuLG90cClcblxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6ICdVc2VyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JyB9KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1NpZ251cCBlcnJvcjonLCBlcnJvcilcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSlcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB3aXRoREIoaGFuZGxlcik7Il0sIm5hbWVzIjpbImNvbm5lY3REQiIsImNvcnMiLCJVc2VyIiwiZ2VuZXJhdGVPVFAiLCJnZW5lcmF0ZVZlcmlmaWNhdGlvblRva2VuIiwic2VuZFZlcmlmaWNhdGlvbkVtYWlsIiwid2l0aERCIiwiY29yc01pZGRsZXdhcmUiLCJvcmlnaW4iLCJtZXRob2RzIiwiY3JlZGVudGlhbHMiLCJydW5NaWRkbGV3YXJlIiwicmVxIiwicmVzIiwiZm4iLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInJlc3VsdCIsIkVycm9yIiwiaGFuZGxlciIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsImVtYWlsIiwicGFzc3dvcmQiLCJmdWxsTmFtZSIsInJvbGUiLCJkZXBhcnRtZW50IiwicGhvbmVOdW1iZXIiLCJzZWNyZXROdW1iZXIiLCJzZW1lc3RlciIsImJvZHkiLCJleGlzdGluZ1VzZXIiLCJmaW5kT25lIiwib3RwIiwidmVyaWZpY2F0aW9uVG9rZW4iLCJ1c2VyRGF0YSIsInZlcmlmaWNhdGlvblRva2VuRXhwaXJ5IiwiRGF0ZSIsIm5vdyIsInZlcmlmaWNhdGlvbkNvZGUiLCJ2ZXJpZmljYXRpb25Db2RlRXhwaXJ5IiwidXNlciIsInNhdmUiLCJtZXNzYWdlIiwiY29uc29sZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/auth/signup.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fsignup&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cauth%5Csignup.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();