"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/auth/send-otp";
exports.ids = ["pages/api/auth/send-otp"];
exports.modules = {

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("bcryptjs");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "nodemailer":
/*!*****************************!*\
  !*** external "nodemailer" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("nodemailer");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fsend-otp&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cauth%5Csend-otp.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fsend-otp&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cauth%5Csend-otp.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_auth_send_otp_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\auth\\send-otp.ts */ \"(api)/./src/pages/api/auth/send-otp.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_auth_send_otp_ts__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_auth_send_otp_ts__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/auth/send-otp\",\n        pathname: \"/api/auth/send-otp\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _src_pages_api_auth_send_otp_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmF1dGglMkZzZW5kLW90cCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnNyYyU1Q3BhZ2VzJTVDYXBpJTVDYXV0aCU1Q3NlbmQtb3RwLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNFO0FBQzFEO0FBQ2lFO0FBQ2pFO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyw0REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsNERBQVE7QUFDcEM7QUFDTyx3QkFBd0IseUdBQW1CO0FBQ2xEO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmNcXFxccGFnZXNcXFxcYXBpXFxcXGF1dGhcXFxcc2VuZC1vdHAudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2F1dGgvc2VuZC1vdHBcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hdXRoL3NlbmQtb3RwXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fsend-otp&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cauth%5Csend-otp.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/lib/auth/otp.ts":
/*!*****************************!*\
  !*** ./src/lib/auth/otp.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateOTP: () => (/* binding */ generateOTP)\n/* harmony export */ });\nfunction generateOTP() {\n    return Math.floor(100000 + Math.random() * 900000).toString();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2F1dGgvb3RwLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyxTQUFTQTtJQUNaLE9BQU9DLEtBQUtDLEtBQUssQ0FBQyxTQUFTRCxLQUFLRSxNQUFNLEtBQUssUUFBUUMsUUFBUTtBQUM3RCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcHB1c1xcRG93bmxvYWRzXFxwOSAtIENvcHlcXHA5XFxzcmNcXGxpYlxcYXV0aFxcb3RwLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZU9UUCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIE1hdGguZmxvb3IoMTAwMDAwICsgTWF0aC5yYW5kb20oKSAqIDkwMDAwMCkudG9TdHJpbmcoKTtcclxuICB9Il0sIm5hbWVzIjpbImdlbmVyYXRlT1RQIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwidG9TdHJpbmciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/auth/otp.ts\n");

/***/ }),

/***/ "(api)/./src/lib/db/models/User.ts":
/*!***********************************!*\
  !*** ./src/lib/db/models/User.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   User: () => (/* binding */ User)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst userSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    fullName: {\n        type: String,\n        required: true\n    },\n    email: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    password: {\n        type: String,\n        required: function() {\n            return !this.googleId;\n        }\n    },\n    googleId: {\n        type: String,\n        sparse: true\n    },\n    role: {\n        type: String,\n        enum: [\n            'student',\n            'faculty'\n        ],\n        required: true\n    },\n    department: {\n        type: String,\n        required: true\n    },\n    phoneNumber: {\n        type: String,\n        required: true\n    },\n    semester: {\n        type: Number,\n        required: function() {\n            return this.role === 'student';\n        }\n    },\n    secretNumber: {\n        type: String,\n        required: function() {\n            return this.role === 'faculty';\n        }\n    },\n    isEmailVerified: {\n        type: Boolean,\n        default: false\n    },\n    verificationToken: String,\n    verificationTokenExpiry: Date,\n    verificationOTP: String,\n    verificationOTPExpiry: Date,\n    verificationCode: String,\n    verificationCodeExpiry: Date,\n    createdAt: {\n        type: Date,\n        default: Date.now\n    }\n});\n// Hash password before saving\nuserSchema.pre('save', async function(next) {\n    if (this.isModified('password') && this.password) {\n        this.password = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().hash(this.password, 10);\n    }\n    next();\n});\n// Method to compare password\nuserSchema.methods.comparePassword = async function(candidatePassword) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().compare(candidatePassword, this.password);\n};\nconst User = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).User || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('User', userSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2RiL21vZGVscy9Vc2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQWdDO0FBQ0Y7QUFFOUIsTUFBTUUsYUFBYSxJQUFJRix3REFBZSxDQUFDO0lBQ3JDSSxVQUFVO1FBQ1JDLE1BQU1DO1FBQ05DLFVBQVU7SUFDWjtJQUNBQyxPQUFPO1FBQ0xILE1BQU1DO1FBQ05DLFVBQVU7UUFDVkUsUUFBUTtJQUNWO0lBQ0FDLFVBQVU7UUFDUkwsTUFBTUM7UUFDTkMsVUFBVTtZQUNSLE9BQU8sQ0FBQyxJQUFJLENBQUNJLFFBQVE7UUFDdkI7SUFDRjtJQUNBQSxVQUFVO1FBQ1JOLE1BQU1DO1FBQ05NLFFBQVE7SUFDVjtJQUNBQyxNQUFNO1FBQ0pSLE1BQU1DO1FBQ05RLE1BQU07WUFBQztZQUFXO1NBQVU7UUFDNUJQLFVBQVU7SUFDWjtJQUNBUSxZQUFZO1FBQ1ZWLE1BQU1DO1FBQ05DLFVBQVU7SUFDWjtJQUNBUyxhQUFhO1FBQ1hYLE1BQU1DO1FBQ05DLFVBQVU7SUFDWjtJQUNBVSxVQUFVO1FBQ1JaLE1BQU1hO1FBQ05YLFVBQVU7WUFDUixPQUFPLElBQUksQ0FBQ00sSUFBSSxLQUFLO1FBQ3ZCO0lBQ0Y7SUFDQU0sY0FBYztRQUNaZCxNQUFNQztRQUNOQyxVQUFVO1lBQ1IsT0FBTyxJQUFJLENBQUNNLElBQUksS0FBSztRQUN2QjtJQUNGO0lBQ0FPLGlCQUFpQjtRQUNmZixNQUFNZ0I7UUFDTkMsU0FBUztJQUNYO0lBQ0FDLG1CQUFtQmpCO0lBQ25Ca0IseUJBQXlCQztJQUN6QkMsaUJBQWlCcEI7SUFDakJxQix1QkFBdUJGO0lBQ3ZCRyxrQkFBa0J0QjtJQUNsQnVCLHdCQUF3Qko7SUFDeEJLLFdBQVc7UUFDVHpCLE1BQU1vQjtRQUNOSCxTQUFTRyxLQUFLTSxHQUFHO0lBQ25CO0FBQ0Y7QUFFQSw4QkFBOEI7QUFDOUI3QixXQUFXOEIsR0FBRyxDQUFDLFFBQVEsZUFBZUMsSUFBSTtJQUN4QyxJQUFJLElBQUksQ0FBQ0MsVUFBVSxDQUFDLGVBQWUsSUFBSSxDQUFDeEIsUUFBUSxFQUFFO1FBQ2hELElBQUksQ0FBQ0EsUUFBUSxHQUFHLE1BQU1ULG9EQUFXLENBQUMsSUFBSSxDQUFDUyxRQUFRLEVBQUU7SUFDbkQ7SUFDQXVCO0FBQ0Y7QUFFQSw2QkFBNkI7QUFDN0IvQixXQUFXa0MsT0FBTyxDQUFDQyxlQUFlLEdBQUcsZUFBZUMsaUJBQXlCO0lBQzNFLE9BQU9yQyx1REFBYyxDQUFDcUMsbUJBQW1CLElBQUksQ0FBQzVCLFFBQVE7QUFDeEQ7QUFFTyxNQUFNOEIsT0FBT3hDLHdEQUFlLENBQUN3QyxJQUFJLElBQUl4QyxxREFBYyxDQUFDLFFBQVFFLFlBQVkiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBwdXNcXERvd25sb2Fkc1xccDkgLSBDb3B5XFxwOVxcc3JjXFxsaWJcXGRiXFxtb2RlbHNcXFVzZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xuXG5jb25zdCB1c2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gIGZ1bGxOYW1lOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICB9LFxuICBlbWFpbDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB1bmlxdWU6IHRydWUsXG4gIH0sXG4gIHBhc3N3b3JkOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAhdGhpcy5nb29nbGVJZDtcbiAgICB9LFxuICB9LFxuICBnb29nbGVJZDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICBzcGFyc2U6IHRydWUsXG4gIH0sXG4gIHJvbGU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZW51bTogWydzdHVkZW50JywgJ2ZhY3VsdHknXSxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgZGVwYXJ0bWVudDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgcGhvbmVOdW1iZXI6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gIH0sXG4gIHNlbWVzdGVyOiB7XG4gICAgdHlwZTogTnVtYmVyLFxuICAgIHJlcXVpcmVkOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnJvbGUgPT09ICdzdHVkZW50JztcbiAgICB9LFxuICB9LFxuICBzZWNyZXROdW1iZXI6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMucm9sZSA9PT0gJ2ZhY3VsdHknO1xuICAgIH0sXG4gIH0sXG4gIGlzRW1haWxWZXJpZmllZDoge1xuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gIH0sXG4gIHZlcmlmaWNhdGlvblRva2VuOiBTdHJpbmcsXG4gIHZlcmlmaWNhdGlvblRva2VuRXhwaXJ5OiBEYXRlLFxuICB2ZXJpZmljYXRpb25PVFA6IFN0cmluZyxcbiAgdmVyaWZpY2F0aW9uT1RQRXhwaXJ5OiBEYXRlLFxuICB2ZXJpZmljYXRpb25Db2RlOiBTdHJpbmcsXG4gIHZlcmlmaWNhdGlvbkNvZGVFeHBpcnk6IERhdGUsXG4gIGNyZWF0ZWRBdDoge1xuICAgIHR5cGU6IERhdGUsXG4gICAgZGVmYXVsdDogRGF0ZS5ub3csXG4gIH0sXG59KTtcblxuLy8gSGFzaCBwYXNzd29yZCBiZWZvcmUgc2F2aW5nXG51c2VyU2NoZW1hLnByZSgnc2F2ZScsIGFzeW5jIGZ1bmN0aW9uKG5leHQpIHtcbiAgaWYgKHRoaXMuaXNNb2RpZmllZCgncGFzc3dvcmQnKSAmJiB0aGlzLnBhc3N3b3JkKSB7XG4gICAgdGhpcy5wYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHRoaXMucGFzc3dvcmQsIDEwKTtcbiAgfVxuICBuZXh0KCk7XG59KTtcblxuLy8gTWV0aG9kIHRvIGNvbXBhcmUgcGFzc3dvcmRcbnVzZXJTY2hlbWEubWV0aG9kcy5jb21wYXJlUGFzc3dvcmQgPSBhc3luYyBmdW5jdGlvbihjYW5kaWRhdGVQYXNzd29yZDogc3RyaW5nKSB7XG4gIHJldHVybiBiY3J5cHQuY29tcGFyZShjYW5kaWRhdGVQYXNzd29yZCwgdGhpcy5wYXNzd29yZCk7XG59O1xuXG5leHBvcnQgY29uc3QgVXNlciA9IG1vbmdvb3NlLm1vZGVscy5Vc2VyIHx8IG1vbmdvb3NlLm1vZGVsKCdVc2VyJywgdXNlclNjaGVtYSk7Il0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiYmNyeXB0IiwidXNlclNjaGVtYSIsIlNjaGVtYSIsImZ1bGxOYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiZW1haWwiLCJ1bmlxdWUiLCJwYXNzd29yZCIsImdvb2dsZUlkIiwic3BhcnNlIiwicm9sZSIsImVudW0iLCJkZXBhcnRtZW50IiwicGhvbmVOdW1iZXIiLCJzZW1lc3RlciIsIk51bWJlciIsInNlY3JldE51bWJlciIsImlzRW1haWxWZXJpZmllZCIsIkJvb2xlYW4iLCJkZWZhdWx0IiwidmVyaWZpY2F0aW9uVG9rZW4iLCJ2ZXJpZmljYXRpb25Ub2tlbkV4cGlyeSIsIkRhdGUiLCJ2ZXJpZmljYXRpb25PVFAiLCJ2ZXJpZmljYXRpb25PVFBFeHBpcnkiLCJ2ZXJpZmljYXRpb25Db2RlIiwidmVyaWZpY2F0aW9uQ29kZUV4cGlyeSIsImNyZWF0ZWRBdCIsIm5vdyIsInByZSIsIm5leHQiLCJpc01vZGlmaWVkIiwiaGFzaCIsIm1ldGhvZHMiLCJjb21wYXJlUGFzc3dvcmQiLCJjYW5kaWRhdGVQYXNzd29yZCIsImNvbXBhcmUiLCJVc2VyIiwibW9kZWxzIiwibW9kZWwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/db/models/User.ts\n");

/***/ }),

/***/ "(api)/./src/lib/email/config.ts":
/*!*********************************!*\
  !*** ./src/lib/email/config.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   emailConfig: () => (/* binding */ emailConfig),\n/* harmony export */   transporter: () => (/* binding */ transporter),\n/* harmony export */   verifyEmailConfig: () => (/* binding */ verifyEmailConfig)\n/* harmony export */ });\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nodemailer */ \"nodemailer\");\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(nodemailer__WEBPACK_IMPORTED_MODULE_0__);\n\n// Email configuration\nconst emailConfig = {\n    host: 'smtp.gmail.com',\n    port: 587,\n    secure: false,\n    auth: {\n        user: process.env.EMAIL_USER,\n        pass: process.env.EMAIL_PASS\n    },\n    tls: {\n        rejectUnauthorized: false // Allow self-signed certificates\n    }\n};\n// Create transporter\nconst transporter = nodemailer__WEBPACK_IMPORTED_MODULE_0___default().createTransport({\n    service: 'gmail',\n    auth: {\n        user: process.env.EMAIL_USER,\n        pass: process.env.EMAIL_PASS\n    }\n});\n// Verify email configuration\nconst verifyEmailConfig = async ()=>{\n    try {\n        await transporter.verify();\n        console.log('Email configuration verified successfully');\n        return true;\n    } catch (error) {\n        console.error('Email configuration error:', error);\n        return false;\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2VtYWlsL2NvbmZpZy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUNvQztBQUVwQyxzQkFBc0I7QUFDZixNQUFNQyxjQUFjO0lBQ3pCQyxNQUFNO0lBQ05DLE1BQU07SUFDTkMsUUFBUTtJQUNSQyxNQUFNO1FBQ0pDLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0MsVUFBVTtRQUM1QkMsTUFBTUgsUUFBUUMsR0FBRyxDQUFDRyxVQUFVO0lBQzlCO0lBQ0FDLEtBQUs7UUFDSEMsb0JBQW9CLE1BQU0saUNBQWlDO0lBQzdEO0FBQ0YsRUFBRTtBQUVGLHFCQUFxQjtBQUNkLE1BQU1DLGNBQWNkLGlFQUEwQixDQUFDO0lBQ3BEZ0IsU0FBUztJQUNUWCxNQUFNO1FBQ0pDLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0MsVUFBVTtRQUM1QkMsTUFBTUgsUUFBUUMsR0FBRyxDQUFDRyxVQUFVO0lBQzlCO0FBQ0YsR0FBRztBQUNILDZCQUE2QjtBQUN0QixNQUFNTSxvQkFBb0I7SUFDL0IsSUFBSTtRQUNGLE1BQU1ILFlBQVlJLE1BQU07UUFDeEJDLFFBQVFDLEdBQUcsQ0FBQztRQUNaLE9BQU87SUFDVCxFQUFFLE9BQU9DLE9BQU87UUFDZEYsUUFBUUUsS0FBSyxDQUFDLDhCQUE4QkE7UUFDNUMsT0FBTztJQUNUO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhcHB1c1xcRG93bmxvYWRzXFxwOSAtIENvcHlcXHA5XFxzcmNcXGxpYlxcZW1haWxcXGNvbmZpZy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVUcmFuc3BvcnQgfSBmcm9tICdub2RlbWFpbGVyJztcbmltcG9ydCBub2RlbWFpbGVyIGZyb20gJ25vZGVtYWlsZXInO1xuXG4vLyBFbWFpbCBjb25maWd1cmF0aW9uXG5leHBvcnQgY29uc3QgZW1haWxDb25maWcgPSB7XG4gIGhvc3Q6ICdzbXRwLmdtYWlsLmNvbScsXG4gIHBvcnQ6IDU4NyxcbiAgc2VjdXJlOiBmYWxzZSxcbiAgYXV0aDoge1xuICAgIHVzZXI6IHByb2Nlc3MuZW52LkVNQUlMX1VTRVIsXG4gICAgcGFzczogcHJvY2Vzcy5lbnYuRU1BSUxfUEFTU1xuICB9LFxuICB0bHM6IHtcbiAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlIC8vIEFsbG93IHNlbGYtc2lnbmVkIGNlcnRpZmljYXRlc1xuICB9XG59O1xuXG4vLyBDcmVhdGUgdHJhbnNwb3J0ZXJcbmV4cG9ydCBjb25zdCB0cmFuc3BvcnRlciA9IG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KHtcbiAgc2VydmljZTogJ2dtYWlsJyxcbiAgYXV0aDoge1xuICAgIHVzZXI6IHByb2Nlc3MuZW52LkVNQUlMX1VTRVIsXG4gICAgcGFzczogcHJvY2Vzcy5lbnYuRU1BSUxfUEFTU1xuICB9XG59KTtcbi8vIFZlcmlmeSBlbWFpbCBjb25maWd1cmF0aW9uXG5leHBvcnQgY29uc3QgdmVyaWZ5RW1haWxDb25maWcgPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgdHJhbnNwb3J0ZXIudmVyaWZ5KCk7XG4gICAgY29uc29sZS5sb2coJ0VtYWlsIGNvbmZpZ3VyYXRpb24gdmVyaWZpZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRW1haWwgY29uZmlndXJhdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59OyJdLCJuYW1lcyI6WyJub2RlbWFpbGVyIiwiZW1haWxDb25maWciLCJob3N0IiwicG9ydCIsInNlY3VyZSIsImF1dGgiLCJ1c2VyIiwicHJvY2VzcyIsImVudiIsIkVNQUlMX1VTRVIiLCJwYXNzIiwiRU1BSUxfUEFTUyIsInRscyIsInJlamVjdFVuYXV0aG9yaXplZCIsInRyYW5zcG9ydGVyIiwiY3JlYXRlVHJhbnNwb3J0Iiwic2VydmljZSIsInZlcmlmeUVtYWlsQ29uZmlnIiwidmVyaWZ5IiwiY29uc29sZSIsImxvZyIsImVycm9yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/lib/email/config.ts\n");

/***/ }),

/***/ "(api)/./src/lib/email/sendEmail.ts":
/*!************************************!*\
  !*** ./src/lib/email/sendEmail.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sendVerificationEmail: () => (/* binding */ sendVerificationEmail)\n/* harmony export */ });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ \"(api)/./src/lib/email/config.ts\");\n/* harmony import */ var _templates__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./templates */ \"(api)/./src/lib/email/templates.ts\");\n\n\nasync function sendVerificationEmail(email, token, otp) {\n    try {\n        console.log('Attempting to send verification email to:', email);\n        console.log('Sending verification email:', {\n            email,\n            otp,\n            token\n        });\n        const baseUrl = process.env.BASE_URL || 'http://localhost:5173';\n        const verificationLink = `${baseUrl}/verify-email?token=${token}`;\n        console.log('Verification link:', verificationLink);\n        const mailOptions = {\n            from: `\"Versatile Share\" <${process.env.EMAIL_USER}>`,\n            to: email,\n            subject: 'Verify your Versatile Share account',\n            html: (0,_templates__WEBPACK_IMPORTED_MODULE_1__.getVerificationEmailTemplate)(otp)\n        };\n        const info = await _config__WEBPACK_IMPORTED_MODULE_0__.transporter.sendMail(mailOptions);\n        console.log('Email sent successfully:', {\n            messageId: info.messageId,\n            recipient: email,\n            preview: info.messageId ? `https://mailtrap.io/inboxes/test/messages/${info.messageId}` : undefined\n        });\n        return true;\n    } catch (error) {\n        console.error('Failed to send verification email:', error);\n        throw new Error('Failed to send verification email');\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2VtYWlsL3NlbmRFbWFpbC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBdUM7QUFDb0I7QUFFcEQsZUFBZUUsc0JBQXNCQyxLQUFhLEVBQUVDLEtBQWEsRUFBQ0MsR0FBVTtJQUNqRixJQUFJO1FBQ0ZDLFFBQVFDLEdBQUcsQ0FBQyw2Q0FBNkNKO1FBQ3pERyxRQUFRQyxHQUFHLENBQUMsK0JBQStCO1lBQ3pDSjtZQUNBRTtZQUNBRDtRQUNGO1FBQ0EsTUFBTUksVUFBVUMsUUFBUUMsR0FBRyxDQUFDQyxRQUFRLElBQUk7UUFDeEMsTUFBTUMsbUJBQW1CLEdBQUdKLFFBQVEsb0JBQW9CLEVBQUVKLE9BQU87UUFFakVFLFFBQVFDLEdBQUcsQ0FBQyxzQkFBc0JLO1FBRWxDLE1BQU1DLGNBQWM7WUFDbEJDLE1BQU0sQ0FBQyxtQkFBbUIsRUFBRUwsUUFBUUMsR0FBRyxDQUFDSyxVQUFVLENBQUMsQ0FBQyxDQUFDO1lBQ3JEQyxJQUFJYjtZQUNKYyxTQUFTO1lBQ1RDLE1BQU1qQix3RUFBNEJBLENBQUNJO1FBQ3JDO1FBRUEsTUFBTWMsT0FBTyxNQUFNbkIsZ0RBQVdBLENBQUNvQixRQUFRLENBQUNQO1FBRXhDUCxRQUFRQyxHQUFHLENBQUMsNEJBQTRCO1lBQ3RDYyxXQUFXRixLQUFLRSxTQUFTO1lBQ3pCQyxXQUFXbkI7WUFDWG9CLFNBQVNKLEtBQUtFLFNBQVMsR0FBRyxDQUFDLDBDQUEwQyxFQUFFRixLQUFLRSxTQUFTLEVBQUUsR0FBR0c7UUFDNUY7UUFFQSxPQUFPO0lBQ1QsRUFBRSxPQUFPQyxPQUFPO1FBQ2RuQixRQUFRbUIsS0FBSyxDQUFDLHNDQUFzQ0E7UUFDcEQsTUFBTSxJQUFJQyxNQUFNO0lBQ2xCO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBwdXNcXERvd25sb2Fkc1xccDkgLSBDb3B5XFxwOVxcc3JjXFxsaWJcXGVtYWlsXFxzZW5kRW1haWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdHJhbnNwb3J0ZXIgfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgeyBnZXRWZXJpZmljYXRpb25FbWFpbFRlbXBsYXRlIH0gZnJvbSAnLi90ZW1wbGF0ZXMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VuZFZlcmlmaWNhdGlvbkVtYWlsKGVtYWlsOiBzdHJpbmcsIHRva2VuOiBzdHJpbmcsb3RwOnN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdBdHRlbXB0aW5nIHRvIHNlbmQgdmVyaWZpY2F0aW9uIGVtYWlsIHRvOicsIGVtYWlsKTtcbiAgICBjb25zb2xlLmxvZygnU2VuZGluZyB2ZXJpZmljYXRpb24gZW1haWw6Jywge1xuICAgICAgZW1haWwsXG4gICAgICBvdHAsXG4gICAgICB0b2tlblxuICAgIH0pO1xuICAgIGNvbnN0IGJhc2VVcmwgPSBwcm9jZXNzLmVudi5CQVNFX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDo1MTczJztcbiAgICBjb25zdCB2ZXJpZmljYXRpb25MaW5rID0gYCR7YmFzZVVybH0vdmVyaWZ5LWVtYWlsP3Rva2VuPSR7dG9rZW59YDtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnVmVyaWZpY2F0aW9uIGxpbms6JywgdmVyaWZpY2F0aW9uTGluayk7XG5cbiAgICBjb25zdCBtYWlsT3B0aW9ucyA9IHtcbiAgICAgIGZyb206IGBcIlZlcnNhdGlsZSBTaGFyZVwiIDwke3Byb2Nlc3MuZW52LkVNQUlMX1VTRVJ9PmAsXG4gICAgICB0bzogZW1haWwsXG4gICAgICBzdWJqZWN0OiAnVmVyaWZ5IHlvdXIgVmVyc2F0aWxlIFNoYXJlIGFjY291bnQnLFxuICAgICAgaHRtbDogZ2V0VmVyaWZpY2F0aW9uRW1haWxUZW1wbGF0ZShvdHApXG4gICAgfTtcblxuICAgIGNvbnN0IGluZm8gPSBhd2FpdCB0cmFuc3BvcnRlci5zZW5kTWFpbChtYWlsT3B0aW9ucyk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ0VtYWlsIHNlbnQgc3VjY2Vzc2Z1bGx5OicsIHtcbiAgICAgIG1lc3NhZ2VJZDogaW5mby5tZXNzYWdlSWQsXG4gICAgICByZWNpcGllbnQ6IGVtYWlsLFxuICAgICAgcHJldmlldzogaW5mby5tZXNzYWdlSWQgPyBgaHR0cHM6Ly9tYWlsdHJhcC5pby9pbmJveGVzL3Rlc3QvbWVzc2FnZXMvJHtpbmZvLm1lc3NhZ2VJZH1gIDogdW5kZWZpbmVkXG4gICAgfSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2VuZCB2ZXJpZmljYXRpb24gZW1haWw6JywgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHNlbmQgdmVyaWZpY2F0aW9uIGVtYWlsJyk7XG4gIH1cbn0iXSwibmFtZXMiOlsidHJhbnNwb3J0ZXIiLCJnZXRWZXJpZmljYXRpb25FbWFpbFRlbXBsYXRlIiwic2VuZFZlcmlmaWNhdGlvbkVtYWlsIiwiZW1haWwiLCJ0b2tlbiIsIm90cCIsImNvbnNvbGUiLCJsb2ciLCJiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIkJBU0VfVVJMIiwidmVyaWZpY2F0aW9uTGluayIsIm1haWxPcHRpb25zIiwiZnJvbSIsIkVNQUlMX1VTRVIiLCJ0byIsInN1YmplY3QiLCJodG1sIiwiaW5mbyIsInNlbmRNYWlsIiwibWVzc2FnZUlkIiwicmVjaXBpZW50IiwicHJldmlldyIsInVuZGVmaW5lZCIsImVycm9yIiwiRXJyb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/email/sendEmail.ts\n");

/***/ }),

/***/ "(api)/./src/lib/email/templates.ts":
/*!************************************!*\
  !*** ./src/lib/email/templates.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getVerificationEmailTemplate: () => (/* binding */ getVerificationEmailTemplate)\n/* harmony export */ });\nconst getVerificationEmailTemplate = (otp)=>`\n<!DOCTYPE html>\n<html>\n<head>\n  <style>\n    .container { font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; }\n    .button { background-color: #4F46E5; color: white; padding: 12px 24px; text-decoration: none; border-radius: 4px; display: inline-block; margin: 16px 0; }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <h1 style=\"color: #4F46E5;\">Welcome to Versatile Share!</h1>\n    <p>Please click the button below to verify your email address:</p>\n    <a href=\"\" class=\"button\">${otp}</a>\n    \n    <p>This verification link will expire in 24 hours.</p>\n  </div>\n</body>\n</html>\n`;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2VtYWlsL3RlbXBsYXRlcy50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQU8sTUFBTUEsK0JBQStCLENBQUNDLE1BQWdCLENBQUM7Ozs7Ozs7Ozs7Ozs7OEJBYWhDLEVBQUVBLElBQUk7Ozs7OztBQU1wQyxDQUFDLENBQUMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYXBwdXNcXERvd25sb2Fkc1xccDkgLSBDb3B5XFxwOVxcc3JjXFxsaWJcXGVtYWlsXFx0ZW1wbGF0ZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGdldFZlcmlmaWNhdGlvbkVtYWlsVGVtcGxhdGUgPSAob3RwOiBzdHJpbmcpID0+IGBcbjwhRE9DVFlQRSBodG1sPlxuPGh0bWw+XG48aGVhZD5cbiAgPHN0eWxlPlxuICAgIC5jb250YWluZXIgeyBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvOyB9XG4gICAgLmJ1dHRvbiB7IGJhY2tncm91bmQtY29sb3I6ICM0RjQ2RTU7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTJweCAyNHB4OyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGJvcmRlci1yYWRpdXM6IDRweDsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBtYXJnaW46IDE2cHggMDsgfVxuICA8L3N0eWxlPlxuPC9oZWFkPlxuPGJvZHk+XG4gIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cbiAgICA8aDEgc3R5bGU9XCJjb2xvcjogIzRGNDZFNTtcIj5XZWxjb21lIHRvIFZlcnNhdGlsZSBTaGFyZSE8L2gxPlxuICAgIDxwPlBsZWFzZSBjbGljayB0aGUgYnV0dG9uIGJlbG93IHRvIHZlcmlmeSB5b3VyIGVtYWlsIGFkZHJlc3M6PC9wPlxuICAgIDxhIGhyZWY9XCJcIiBjbGFzcz1cImJ1dHRvblwiPiR7b3RwfTwvYT5cbiAgICBcbiAgICA8cD5UaGlzIHZlcmlmaWNhdGlvbiBsaW5rIHdpbGwgZXhwaXJlIGluIDI0IGhvdXJzLjwvcD5cbiAgPC9kaXY+XG48L2JvZHk+XG48L2h0bWw+XG5gOyJdLCJuYW1lcyI6WyJnZXRWZXJpZmljYXRpb25FbWFpbFRlbXBsYXRlIiwib3RwIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/lib/email/templates.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/auth/send-otp.ts":
/*!****************************************!*\
  !*** ./src/pages/api/auth/send-otp.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_db_models_User__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/db/models/User */ \"(api)/./src/lib/db/models/User.ts\");\n/* harmony import */ var _lib_auth_otp__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/auth/otp */ \"(api)/./src/lib/auth/otp.ts\");\n/* harmony import */ var _lib_email_sendEmail__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/email/sendEmail */ \"(api)/./src/lib/email/sendEmail.ts\");\n// pages/api/auth/send-otp.ts\n\n\n\nasync function handler(req, res) {\n    if (req.method !== 'POST') return res.status(405).end();\n    try {\n        const { email } = req.body;\n        const otp = (0,_lib_auth_otp__WEBPACK_IMPORTED_MODULE_1__.generateOTP)();\n        const otpExpiry = new Date(Date.now() + 10 * 60 * 1000); // 10 minutes\n        console.log('Generated OTP:', _lib_auth_otp__WEBPACK_IMPORTED_MODULE_1__.generateOTP, 'Expiry:', new Date(Date.now() + 10 * 60 * 1000));\n        await _lib_db_models_User__WEBPACK_IMPORTED_MODULE_0__.User.findOneAndUpdate({\n            email\n        }, {\n            verificationOTP: otp,\n            verificationOTPExpiry: otpExpiry\n        });\n        await (0,_lib_email_sendEmail__WEBPACK_IMPORTED_MODULE_2__.sendVerificationEmail)(email, token, otp);\n        res.status(200).json({\n            message: 'OTP sent successfully'\n        });\n    } catch (error) {\n        res.status(500).json({\n            error: 'Failed to send OTP'\n        });\n    }\n} // export default async function handler(req: NextApiRequest, res: NextApiResponse) {\n //   if (req.method !== 'POST') return res.status(405).end();\n //   try {\n //     const { email, otp } = req.body;\n //     const user = await User.findOne({ \n //       email,\n //       verificationOTP: otp,\n //       verificationOTPExpiry: { $gt: new Date() }\n //     });\n //     if (!user) {\n //       return res.status(400).json({ error: 'Invalid or expired OTP' });\n //     }\n //     user.isEmailVerified = true;\n //     user.verificationOTP = undefined;\n //     user.verificationOTPExpiry = undefined;\n //     await user.save();\n //     res.status(200).json({ message: 'Email verified successfully' });\n //   } catch (error) {\n //     res.status(500).json({ error: 'Verification failed' });\n //   }\n // }\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2F1dGgvc2VuZC1vdHAudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLDZCQUE2QjtBQUVzQjtBQUNDO0FBQ2lCO0FBRXRELGVBQWVHLFFBQVFDLEdBQW1CLEVBQUVDLEdBQW9CO0lBQzdFLElBQUlELElBQUlFLE1BQU0sS0FBSyxRQUFRLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxHQUFHO0lBRXJELElBQUk7UUFDRixNQUFNLEVBQUVDLEtBQUssRUFBRSxHQUFHTCxJQUFJTSxJQUFJO1FBQzFCLE1BQU1DLE1BQU1WLDBEQUFXQTtRQUN2QixNQUFNVyxZQUFZLElBQUlDLEtBQUtBLEtBQUtDLEdBQUcsS0FBSyxLQUFLLEtBQUssT0FBTyxhQUFhO1FBQ3RFQyxRQUFRQyxHQUFHLENBQUMsa0JBQWtCZixzREFBV0EsRUFBRSxXQUFXLElBQUlZLEtBQUtBLEtBQUtDLEdBQUcsS0FBSyxLQUFLLEtBQUs7UUFFdEYsTUFBTWQscURBQUlBLENBQUNpQixnQkFBZ0IsQ0FDekI7WUFBRVI7UUFBTSxHQUNSO1lBQUVTLGlCQUFpQlA7WUFBS1EsdUJBQXVCUDtRQUFVO1FBRzNELE1BQU1WLDJFQUFxQkEsQ0FBQ08sT0FBTVcsT0FBT1Q7UUFDekNOLElBQUlFLE1BQU0sQ0FBQyxLQUFLYyxJQUFJLENBQUM7WUFBRUMsU0FBUztRQUF3QjtJQUMxRCxFQUFFLE9BQU9DLE9BQU87UUFDZGxCLElBQUlFLE1BQU0sQ0FBQyxLQUFLYyxJQUFJLENBQUM7WUFBRUUsT0FBTztRQUFxQjtJQUNyRDtBQUNGLEVBSUEscUZBQXFGO0NBQ3JGLDZEQUE2RDtDQUU3RCxVQUFVO0NBQ1YsdUNBQXVDO0NBQ3ZDLHlDQUF5QztDQUN6QyxlQUFlO0NBQ2YsOEJBQThCO0NBQzlCLG1EQUFtRDtDQUNuRCxVQUFVO0NBRVYsbUJBQW1CO0NBQ25CLDBFQUEwRTtDQUMxRSxRQUFRO0NBRVIsbUNBQW1DO0NBQ25DLHdDQUF3QztDQUN4Qyw4Q0FBOEM7Q0FDOUMseUJBQXlCO0NBRXpCLHdFQUF3RTtDQUN4RSxzQkFBc0I7Q0FDdEIsOERBQThEO0NBQzlELE1BQU07Q0FDTixJQUFJIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFwcHVzXFxEb3dubG9hZHNcXHA5IC0gQ29weVxccDlcXHNyY1xccGFnZXNcXGFwaVxcYXV0aFxcc2VuZC1vdHAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gcGFnZXMvYXBpL2F1dGgvc2VuZC1vdHAudHNcclxuaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcbmltcG9ydCB7IFVzZXIgfSBmcm9tICcuLi8uLi8uLi9saWIvZGIvbW9kZWxzL1VzZXInO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZU9UUCB9IGZyb20gJy4uLy4uLy4uL2xpYi9hdXRoL290cCc7XHJcbmltcG9ydCB7IHNlbmRWZXJpZmljYXRpb25FbWFpbCB9IGZyb20gJy4uLy4uLy4uL2xpYi9lbWFpbC9zZW5kRW1haWwnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xyXG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHJldHVybiByZXMuc3RhdHVzKDQwNSkuZW5kKCk7XHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZW1haWwgfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3Qgb3RwID0gZ2VuZXJhdGVPVFAoKTtcclxuICAgIGNvbnN0IG90cEV4cGlyeSA9IG5ldyBEYXRlKERhdGUubm93KCkgKyAxMCAqIDYwICogMTAwMCk7IC8vIDEwIG1pbnV0ZXNcclxuICAgIGNvbnNvbGUubG9nKCdHZW5lcmF0ZWQgT1RQOicsIGdlbmVyYXRlT1RQLCAnRXhwaXJ5OicsIG5ldyBEYXRlKERhdGUubm93KCkgKyAxMCAqIDYwICogMTAwMCkpO1xyXG5cclxuICAgIGF3YWl0IFVzZXIuZmluZE9uZUFuZFVwZGF0ZShcclxuICAgICAgeyBlbWFpbCB9LCBcclxuICAgICAgeyB2ZXJpZmljYXRpb25PVFA6IG90cCwgdmVyaWZpY2F0aW9uT1RQRXhwaXJ5OiBvdHBFeHBpcnkgfVxyXG4gICAgKTtcclxuXHJcbiAgICBhd2FpdCBzZW5kVmVyaWZpY2F0aW9uRW1haWwoZW1haWwsdG9rZW4sIG90cCk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdPVFAgc2VudCBzdWNjZXNzZnVsbHknIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIHNlbmQgT1RQJyB9KTtcclxuICB9XHJcbn1cclxuXHJcblxyXG5cclxuLy8gZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xyXG4vLyAgIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHJldHVybiByZXMuc3RhdHVzKDQwNSkuZW5kKCk7XHJcblxyXG4vLyAgIHRyeSB7XHJcbi8vICAgICBjb25zdCB7IGVtYWlsLCBvdHAgfSA9IHJlcS5ib2R5O1xyXG4vLyAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IFxyXG4vLyAgICAgICBlbWFpbCxcclxuLy8gICAgICAgdmVyaWZpY2F0aW9uT1RQOiBvdHAsXHJcbi8vICAgICAgIHZlcmlmaWNhdGlvbk9UUEV4cGlyeTogeyAkZ3Q6IG5ldyBEYXRlKCkgfVxyXG4vLyAgICAgfSk7XHJcblxyXG4vLyAgICAgaWYgKCF1c2VyKSB7XHJcbi8vICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBvciBleHBpcmVkIE9UUCcgfSk7XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgdXNlci5pc0VtYWlsVmVyaWZpZWQgPSB0cnVlO1xyXG4vLyAgICAgdXNlci52ZXJpZmljYXRpb25PVFAgPSB1bmRlZmluZWQ7XHJcbi8vICAgICB1c2VyLnZlcmlmaWNhdGlvbk9UUEV4cGlyeSA9IHVuZGVmaW5lZDtcclxuLy8gICAgIGF3YWl0IHVzZXIuc2F2ZSgpO1xyXG5cclxuLy8gICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ0VtYWlsIHZlcmlmaWVkIHN1Y2Nlc3NmdWxseScgfSk7XHJcbi8vICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdWZXJpZmljYXRpb24gZmFpbGVkJyB9KTtcclxuLy8gICB9XHJcbi8vIH0iXSwibmFtZXMiOlsiVXNlciIsImdlbmVyYXRlT1RQIiwic2VuZFZlcmlmaWNhdGlvbkVtYWlsIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImVuZCIsImVtYWlsIiwiYm9keSIsIm90cCIsIm90cEV4cGlyeSIsIkRhdGUiLCJub3ciLCJjb25zb2xlIiwibG9nIiwiZmluZE9uZUFuZFVwZGF0ZSIsInZlcmlmaWNhdGlvbk9UUCIsInZlcmlmaWNhdGlvbk9UUEV4cGlyeSIsInRva2VuIiwianNvbiIsIm1lc3NhZ2UiLCJlcnJvciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/auth/send-otp.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fsend-otp&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cauth%5Csend-otp.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();